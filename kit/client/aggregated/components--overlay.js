/* For licensing information see http://contextlysiteimages.contextly.com/_kit/assets/dev/licenses.txt */
!function($){Contextly=window.Contextly||{},Contextly.overlay={options:{},overlay:null,dialog:null,inner:null,closeButton:null,content:null,window:null,document:null,html:null,_defaultOptions:function(){return{zIndex:1e3,overlayColor:"black",overlayOpacity:.5,dialogColor:"white",dialogPadding:20,width:{value:"window",min:0,max:0},height:{value:"window",min:0,max:0},spacing:40,keepPrevious:!1,dataKey:"contextlyOverlay",onCloseButton:null}},_initOptions:function(options){if(options){for(var sizes=["width","height"],i=0;i<sizes.length;i++){var size=sizes[i],type=typeof options[size];"undefined"===type||"number"!==type&&"string"!==type||(options[size]={value:options[size],min:0,max:0})}this.options=options.keepPrevious?$.extend(!0,this.options,options):$.extend(!0,this._defaultOptions(),options)}else this.options=this._defaultOptions()},_initElements:function(){var map={window:window,document:document,html:"html"};for(var key in map)null===this[key]&&(this[key]=$(map[key]));null===this.overlay&&(this.overlay=$('<div class="contextly-overlay" />').hide().appendTo("body")),this.overlay.css({zIndex:this.options.zIndex,backgroundColor:this.options.overlayColor,opacity:this.options.overlayOpacity}),null===this.dialog&&(this.dialog=$('<div class="contextly-overlay-dialog" />').hide().appendTo("body")),this.dialog.css({backgroundColor:this.options.dialogColor,zIndex:this.options.zIndex+1}),null===this.inner&&(this.inner=$('<div class="contextly-overlay-content" />').appendTo(this.dialog));var innerIsFixed=this._innerIsFixed();this.inner.css({zIndex:this.options.zIndex+2,position:innerIsFixed?"fixed":"static",margin:innerIsFixed?0:this.options.dialogPadding}),null===this.closeButton&&(this.closeButton=$('<a href="javascript:" class="contextly-overlay-close"></a>').bind("click",this._proxy(this._onCloseButton)).appendTo(this.dialog)),this.closeButton.css({zIndex:this.options.zIndex+3}),this.inner.add(this.dialog).css({top:"",left:"",width:"",height:""})},open:function(element,options){this._initOptions(options),this.content=element,this._initElements(),this.window.unbind("resize.contextlyOverlay").bind("resize.contextlyOverlay",this._proxy(this._onWindowResize)),this._fireEvent("contextlyOverlayBeforeOpen"),this._lockBodyScroll(),this.overlay.show(),this.inner.empty().append(element),this.dialog.show(),this._refreshDialogSizes(),this._fireEvent("contextlyOverlayAfterOpen")},close:function(){this._fireEvent("contextlyOverlayBeforeClose"),this.content.remove(),this.content=null,this.dialog.hide(),this.overlay.hide(),this._unlockBodyScroll(),this.window.unbind(".contextlyOverlay"),this._fireEvent("contextlyOverlayAfterClose")},setCloseButtonHandler:function(callback){this.options.onCloseButton=callback},_onCloseButton:function(){$.isFunction(this.options.onCloseButton)&&this.options.onCloseButton()===!1||this.close()},_onWindowResize:function(){this._refreshDialogSizes()},_innerIsFixed:function(){return"window"===this.options.height.value},_setDialogDimension:function(dimension,dialogSize){this.dialog.css(dimension,dialogSize),this._innerIsFixed()&&this.inner.css(dimension,dialogSize-2*this.options.dialogPadding)},_setDialogPosition:function(coordinate,windowSize,dialogSize){var dialogPosition=Math.floor((windowSize-dialogSize)/2);this.dialog.css(coordinate,dialogPosition),this._innerIsFixed()&&this.inner.css(coordinate,dialogPosition+this.options.dialogPadding)},_refreshDialogSize:function(dimension,coordinate,options){var dialogSize,windowSize=this.window[dimension]();switch(options.value){case"window":dialogSize=windowSize-2*this.options.spacing,dialogSize=this._applyDialogSizeLimits(dialogSize,options),this._setDialogDimension(dimension,dialogSize),this._setDialogPosition(coordinate,windowSize,dialogSize);break;case"auto":dialogSize=this.dialog[dimension](),this._setDialogPosition(coordinate,windowSize,dialogSize);break;default:"number"!=typeof options.value&&$.error("Unsupported overlay "+dimension+" value: "+options.value),dialogSize=options.value,this._setDialogDimension(dimension,dialogSize),this._setDialogPosition(coordinate,windowSize,dialogSize)}},_refreshDialogSizes:function(){var dimensions={width:"left",height:"top"};for(var dimension in dimensions){var coordinate=dimensions[dimension],sideOptions=this.options[dimension];this._refreshDialogSize(dimension,coordinate,sideOptions)}},_applyDialogSizeLimits:function(value,limits){return limits.min&&value<limits.min?value=limits.min:limits.max&&value>limits.max&&(value=limits.max),value},_proxy:function(func){var self=this;return function(){func.apply(self,arguments)}},_fireEvent:function(type){var args=Array.prototype.slice.call(arguments,1);this.window.triggerHandler(type,args)},_lockBodyScroll:function(){var existingStyle=this.html.attr("style"),data={scroll:{top:this.window.scrollTop(),left:this.window.scrollLeft()},style:existingStyle?existingStyle:""},css={position:"fixed",top:-data.scroll.top,left:-data.scroll.left,width:"100%"};this.document.height()>this.window.height()&&(css["overflow-y"]="scroll"),this.html.data(this.options.dataKey,data).css(css)},_unlockBodyScroll:function(){var data=this.html.data(this.options.dataKey);data&&(this.html.attr("style",data.style),this.window.scrollTop(data.scroll.top).scrollLeft(data.scroll.left))}}}(jQuery);
//# sourceMappingURL=components--overlay.map